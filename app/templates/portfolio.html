{% extends "base.html" %}

{% block title %}Portfolio - Chouchouter By Nanou{% endblock %}

{% block head %}
   <link rel="stylesheet" href="{{ url_for('static', filename='portfolio.css') }}">
{% endblock %}

{% block content %}
  <!-- Main container for the portfolio grid -->
  <div class="container py-5 mt-5">
    <div class="row g-4 justify-content-center">
      {% for image_path in images %}
        <!-- Display each image in a responsive column -->
        <div class="col-12 col-sm-6">
          <img class="img-fluid rounded shadow photo" src="{{ url_for('static', filename=image_path) }}" alt="photo {{ loop.index }}">
        </div>
      {% else %}
        <p>Aucune image disponible pour le moment.</p>
      {% endfor %}
    </div>
  </div>

  <!-- Lightbox overlay for enlarged images -->
  <div class="lightbox-overlay" id="lightbox">
    <button class="lightbox-close" id="lightbox-close">&times;</button>
    <div class="lightbox-content">
      <img src="" alt="Photo agrandie" id="lightbox-img">
    </div>
  </div>

  <!-- Lightbox JavaScript for interactivity -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const images = [...document.querySelectorAll('.photo')];
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      const closeBtn = document.getElementById('lightbox-close');

      function showLightbox(index) {
        lightboxImg.src = images[index].src;
        lightbox.classList.add('visible');
      }

      function hideLightbox() {
        lightbox.classList.remove('visible');
        lightboxImg.src = '';
      }

      // Open lightbox when image is clicked
      images.forEach((img, idx) => {
        img.addEventListener('click', () => showLightbox(idx));
      });

      // Close lightbox when clicking the close button
      closeBtn.addEventListener('click', hideLightbox);

      // Close lightbox when clicking outside the image
      lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) {
          hideLightbox();
        }
      });

      // Close lightbox with Escape key
      document.addEventListener('keydown', (e) => {
        if (!lightbox.classList.contains('visible')) return;
        if (e.key === 'Escape') {
          hideLightbox();
        }
      });
    });
  </script>
{% endblock %}
